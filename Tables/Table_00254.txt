OBJECT Table 254 VAT Entry
{
  OBJECT-PROPERTIES
  {
    Date=09/15/15;
    Time=12:00:00 PM;
    Version List=NAVW19.00,NAVNA9.00;
  }
  PROPERTIES
  {
    OnInsert=VAR
               GenJnlPostPreview@1000 : Codeunit 19;
             BEGIN
               GenJnlPostPreview.SaveVATEntry(Rec);
             END;

    CaptionML=[ENU=Tax Entry;
               ESM=Mov. IVA;
               FRC=êcriture de taxe;
               ENC=Tax Entry];
    LookupPageID=Page315;
  }
  FIELDS
  {
    { 1   ;   ;Entry No.           ;Integer       ;CaptionML=[ENU=Entry No.;
                                                              ESM=Nß mov.;
                                                              FRC=N¯ Çcriture;
                                                              ENC=Entry No.];
                                                   Editable=No }
    { 2   ;   ;Gen. Bus. Posting Group;Code10     ;TableRelation="Gen. Business Posting Group";
                                                   CaptionML=[ENU=Gen. Bus. Posting Group;
                                                              ESM=Grupo contable negocio;
                                                              FRC=Groupe de report de marchÇ;
                                                              ENC=Gen. Bus. Posting Group];
                                                   Editable=No }
    { 3   ;   ;Gen. Prod. Posting Group;Code10    ;TableRelation="Gen. Product Posting Group";
                                                   CaptionML=[ENU=Gen. Prod. Posting Group;
                                                              ESM=Grupo contable producto;
                                                              FRC=Groupe de report de produit;
                                                              ENC=Gen. Prod. Posting Group];
                                                   Editable=No }
    { 4   ;   ;Posting Date        ;Date          ;CaptionML=[ENU=Posting Date;
                                                              ESM=Fecha registro;
                                                              FRC=Date de report;
                                                              ENC=Posting Date];
                                                   Editable=No }
    { 5   ;   ;Document No.        ;Code20        ;CaptionML=[ENU=Document No.;
                                                              ESM=Nß documento;
                                                              FRC=N¯ de document;
                                                              ENC=Document No.];
                                                   Editable=No }
    { 6   ;   ;Document Type       ;Option        ;CaptionML=[ENU=Document Type;
                                                              ESM=Tipo documento;
                                                              FRC=Type de document;
                                                              ENC=Document Type];
                                                   OptionCaptionML=[ENU=" ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund";
                                                                    ESM=" ,Pago,Factura,Nota crÇdito,Docs. interÇs,Recordatorio,Reembolso";
                                                                    FRC=" ,Paiement,Facture,Note de crÇdit,Note de frais financiers,Rappel,Remboursement";
                                                                    ENC=" ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund"];
                                                   OptionString=[ ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund];
                                                   Editable=No }
    { 7   ;   ;Type                ;Option        ;OnValidate=BEGIN
                                                                IF Type = Type::Settlement THEN
                                                                  ERROR(Text000,FIELDCAPTION(Type),Type);
                                                              END;

                                                   CaptionML=[ENU=Type;
                                                              ESM=Tipo;
                                                              FRC=Type;
                                                              ENC=Type];
                                                   OptionCaptionML=[ENU=" ,Purchase,Sale,Settlement";
                                                                    ESM=" ,Compra,Venta,Liquidaci¢n";
                                                                    FRC=" ,Achat,Vente,Räglement";
                                                                    ENC=" ,Purchase,Sale,Settlement"];
                                                   OptionString=[ ,Purchase,Sale,Settlement];
                                                   Editable=No }
    { 8   ;   ;Base                ;Decimal       ;CaptionML=[ENU=Base;
                                                              ESM=Base;
                                                              FRC=Base;
                                                              ENC=Base];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 9   ;   ;Amount              ;Decimal       ;CaptionML=[ENU=Amount;
                                                              ESM=Importe;
                                                              FRC=Montant;
                                                              ENC=Amount];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 10  ;   ;VAT Calculation Type;Option        ;CaptionML=[ENU=Tax Calculation Type;
                                                              ESM=Tipo c†lculo IVA;
                                                              FRC=Type de calcul taxe;
                                                              ENC=Tax Calculation Type];
                                                   OptionCaptionML=[ENU=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax;
                                                                    ESM=Normal,Reversi¢n,Total,Impto. venta;
                                                                    FRC=TVA normale,Frais renversÇs TVA,TVA compläte,Taxe de vente;
                                                                    ENC=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax];
                                                   OptionString=Normal VAT,Reverse Charge VAT,Full VAT,Sales Tax;
                                                   Editable=No }
    { 12  ;   ;Bill-to/Pay-to No.  ;Code20        ;TableRelation=IF (Type=CONST(Purchase)) Vendor
                                                                 ELSE IF (Type=CONST(Sale)) Customer;
                                                   OnValidate=BEGIN
                                                                VALIDATE(Type);
                                                                IF "Bill-to/Pay-to No." = '' THEN BEGIN
                                                                  "Country/Region Code" := '';
                                                                  "VAT Registration No." := '';
                                                                END ELSE
                                                                  CASE Type OF
                                                                    Type::Purchase:
                                                                      BEGIN
                                                                        Vend.GET("Bill-to/Pay-to No.");
                                                                        "Country/Region Code" := Vend."Country/Region Code";
                                                                        "VAT Registration No." := Vend."VAT Registration No.";
                                                                      END;
                                                                    Type::Sale:
                                                                      BEGIN
                                                                        Cust.GET("Bill-to/Pay-to No.");
                                                                        "Country/Region Code" := Cust."Country/Region Code";
                                                                        "VAT Registration No." := Cust."VAT Registration No.";
                                                                      END;
                                                                  END;
                                                              END;

                                                   CaptionML=[ENU=Bill-to/Pay-to No.;
                                                              ESM=Fact./Pago a Nß.;
                                                              FRC=N¯ de Facture Ö/Paiement Ö;
                                                              ENC=Bill-to/Pay-to No.] }
    { 13  ;   ;EU 3-Party Trade    ;Boolean       ;OnValidate=BEGIN
                                                                VALIDATE(Type);
                                                              END;

                                                   CaptionML=[ENU=EU 3-Party Trade;
                                                              ESM=Op. triangular;
                                                              FRC=Trans. tripartite UE;
                                                              ENC=EU 3-Party Trade] }
    { 14  ;   ;User ID             ;Code50        ;TableRelation=User."User Name";
                                                   OnLookup=VAR
                                                              UserMgt@1000 : Codeunit 418;
                                                            BEGIN
                                                              UserMgt.LookupUserID("User ID");
                                                            END;

                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=User ID;
                                                              ESM=Id. usuario;
                                                              FRC=Code utilisateur;
                                                              ENC=User ID];
                                                   Editable=No }
    { 15  ;   ;Source Code         ;Code10        ;TableRelation="Source Code";
                                                   CaptionML=[ENU=Source Code;
                                                              ESM=C¢d. origen;
                                                              FRC=Code d'origine;
                                                              ENC=Source Code];
                                                   Editable=No }
    { 16  ;   ;Reason Code         ;Code10        ;TableRelation="Reason Code";
                                                   CaptionML=[ENU=Reason Code;
                                                              ESM=C¢d. auditor°a;
                                                              FRC=Code motif;
                                                              ENC=Reason Code];
                                                   Editable=No }
    { 17  ;   ;Closed by Entry No. ;Integer       ;TableRelation="VAT Entry";
                                                   CaptionML=[ENU=Closed by Entry No.;
                                                              ESM=Cerrado por nß mov.;
                                                              FRC=FermÇ par l'Çcriture n¯;
                                                              ENC=Closed by Entry No.];
                                                   Editable=No }
    { 18  ;   ;Closed              ;Boolean       ;CaptionML=[ENU=Closed;
                                                              ESM=Cerrado;
                                                              FRC=FermÇ;
                                                              ENC=Closed];
                                                   Editable=No }
    { 19  ;   ;Country/Region Code ;Code10        ;TableRelation=Country/Region;
                                                   OnValidate=BEGIN
                                                                VALIDATE(Type);
                                                                VALIDATE("VAT Registration No.");
                                                              END;

                                                   CaptionML=[ENU=Country/Region Code;
                                                              ESM=C¢d. pa°s/regi¢n;
                                                              FRC=Code pays/rÇgion;
                                                              ENC=Country/Region Code] }
    { 20  ;   ;Internal Ref. No.   ;Text30        ;CaptionML=[ENU=Internal Ref. No.;
                                                              ESM=Nß ref. interno;
                                                              FRC=N¯ rÇfÇrence interne;
                                                              ENC=Internal Ref. No.];
                                                   Editable=No }
    { 21  ;   ;Transaction No.     ;Integer       ;CaptionML=[ENU=Transaction No.;
                                                              ESM=Nß asiento;
                                                              FRC=N¯ transaction;
                                                              ENC=Transaction No.];
                                                   Editable=No }
    { 22  ;   ;Unrealized Amount   ;Decimal       ;CaptionML=[ENU=Unrealized Amount;
                                                              ESM=Importe no realizado;
                                                              FRC=Montant non rÇalisÇ;
                                                              ENC=Unrealized Amount];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 23  ;   ;Unrealized Base     ;Decimal       ;CaptionML=[ENU=Unrealized Base;
                                                              ESM=Base no realizada;
                                                              FRC=Base non rÇalisÇe;
                                                              ENC=Unrealized Base];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 24  ;   ;Remaining Unrealized Amount;Decimal;CaptionML=[ENU=Remaining Unrealized Amount;
                                                              ESM=Importe no realizado pendiente;
                                                              FRC=Montant non rÇalisÇ non appli.;
                                                              ENC=Remaining Unrealized Amount];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 25  ;   ;Remaining Unrealized Base;Decimal  ;CaptionML=[ENU=Remaining Unrealized Base;
                                                              ESM=Base no realizada pendiente;
                                                              FRC=Base non rÇalisÇe restante;
                                                              ENC=Remaining Unrealized Base];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 26  ;   ;External Document No.;Code35       ;CaptionML=[ENU=External Document No.;
                                                              ESM=Nß documento externo;
                                                              FRC=N¯ document externe;
                                                              ENC=External Document No.];
                                                   Editable=No }
    { 28  ;   ;No. Series          ;Code10        ;TableRelation="No. Series";
                                                   CaptionML=[ENU=No. Series;
                                                              ESM=Nos. serie;
                                                              FRC=SÇries de n¯;
                                                              ENC=No. Series];
                                                   Editable=No }
    { 29  ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   CaptionML=[ENU=Tax Area Code;
                                                              ESM=C¢d. †rea impuesto;
                                                              FRC=Code de rÇgion fiscale;
                                                              ENC=Tax Area Code];
                                                   Editable=No }
    { 30  ;   ;Tax Liable          ;Boolean       ;CaptionML=[ENU=Tax Liable;
                                                              ESM=Sujeto a impuesto;
                                                              FRC=Imposable;
                                                              ENC=Tax Liable];
                                                   Editable=No }
    { 31  ;   ;Tax Group Code      ;Code10        ;TableRelation="Tax Group";
                                                   CaptionML=[ENU=Tax Group Code;
                                                              ESM=C¢d. grupo impuesto;
                                                              FRC=Code groupe fiscal;
                                                              ENC=Tax Group Code];
                                                   Editable=No }
    { 32  ;   ;Use Tax             ;Boolean       ;CaptionML=[ENU=Use Tax;
                                                              ESM=Impuesto de importaci¢n;
                                                              FRC=Taxe de service;
                                                              ENC=Use Tax];
                                                   Editable=No }
    { 33  ;   ;Tax Jurisdiction Code;Code10       ;TableRelation="Tax Jurisdiction";
                                                   CaptionML=[ENU=Tax Jurisdiction Code;
                                                              ESM=C¢d. jurisdicci¢n fiscal;
                                                              FRC=Code de juridiction fiscale;
                                                              ENC=Tax Jurisdiction Code];
                                                   Editable=No }
    { 34  ;   ;Tax Group Used      ;Code10        ;TableRelation="Tax Group";
                                                   CaptionML=[ENU=Tax Group Used;
                                                              ESM=Grupo impto. utilizado;
                                                              FRC=Groupe fiscal utilisÇ;
                                                              ENC=Tax Group Used];
                                                   Editable=No }
    { 35  ;   ;Tax Type            ;Option        ;CaptionML=[ENU=Tax Type;
                                                              ESM=Tipo impto.;
                                                              FRC=Type de taxe;
                                                              ENC=Tax Type];
                                                   OptionCaptionML=[ENU=Sales and Use Tax,Excise Tax,Sales Tax Only,Use Tax Only;
                                                                    ESM=Impuesto de las ventas y sobre servicios,Impto. consumo,S¢lo impuesto de las ventas,S¢lo impto. sobre servicios;
                                                                    FRC=Taxe de vente et de service,Taxe d'accise,Taxe de vente uniquement,Taxe de service uniquement;
                                                                    ENC=Sales and Use Tax,Excise Tax,Sales Tax Only,Use Tax Only];
                                                   OptionString=Sales and Use Tax,Excise Tax,Sales Tax Only,Use Tax Only;
                                                   Editable=No }
    { 36  ;   ;Tax on Tax          ;Boolean       ;CaptionML=[ENU=Tax on Tax;
                                                              ESM=Impuesto en impto.;
                                                              FRC=Taxe sur taxe;
                                                              ENC=Tax on Tax];
                                                   Editable=No }
    { 37  ;   ;Sales Tax Connection No.;Integer   ;CaptionML=[ENU=Sales Tax Connection No.;
                                                              ESM=Nß conexi¢n IVA ventas;
                                                              FRC=N¯ lien taxes ventes;
                                                              ENC=Sales Tax Connection No.];
                                                   Editable=No }
    { 38  ;   ;Unrealized VAT Entry No.;Integer   ;TableRelation="VAT Entry";
                                                   CaptionML=[ENU=Unrealized Tax Entry No.;
                                                              ESM=Nß mov. IVA no realizado;
                                                              FRC=N¯ Çcriture TVA non rÇalisÇe;
                                                              ENC=Unrealized Tax Entry No.];
                                                   Editable=No }
    { 39  ;   ;VAT Bus. Posting Group;Code10      ;TableRelation="VAT Business Posting Group";
                                                   CaptionML=[ENU=Tax Bus. Posting Group;
                                                              ESM=Grupo registro IVA neg.;
                                                              FRC=Groupe de reports de taxe sur la valeur ajoutÇe de l'entreprise;
                                                              ENC=Tax Bus. Posting Group];
                                                   Editable=No }
    { 40  ;   ;VAT Prod. Posting Group;Code10     ;TableRelation="VAT Product Posting Group";
                                                   CaptionML=[ENU=Tax Prod. Posting Group;
                                                              ESM=Grupo registro IVA prod.;
                                                              FRC=Groupe de report de produit taxe;
                                                              ENC=Tax Prod. Posting Group];
                                                   Editable=No }
    { 43  ;   ;Additional-Currency Amount;Decimal ;AccessByPermission=TableData 4=R;
                                                   CaptionML=[ENU=Additional-Currency Amount;
                                                              ESM=Importe divisa-adicional;
                                                              FRC=Montant devise add.;
                                                              ENC=Additional-Currency Amount];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 44  ;   ;Additional-Currency Base;Decimal   ;AccessByPermission=TableData 4=R;
                                                   CaptionML=[ENU=Additional-Currency Base;
                                                              ESM=Base divisa-adicional;
                                                              FRC=Base devise add.;
                                                              ENC=Additional-Currency Base];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 45  ;   ;Add.-Currency Unrealized Amt.;Decimal;
                                                   CaptionML=[ENU=Add.-Currency Unrealized Amt.;
                                                              ESM=Imp. no real. div.-adic.;
                                                              FRC=Montant prÇvu devise add.;
                                                              ENC=Add.-Currency Unrealized Amt.];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 46  ;   ;Add.-Currency Unrealized Base;Decimal;
                                                   CaptionML=[ENU=Add.-Currency Unrealized Base;
                                                              ESM=Base no real. div.-adic.;
                                                              FRC=Base non rÇalisÇe devise add.;
                                                              ENC=Add.-Currency Unrealized Base];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 48  ;   ;VAT Base Discount % ;Decimal       ;CaptionML=[ENU=VAT Base Discount %;
                                                              ESM=% Dto. base IVA;
                                                              FRC=% escompte base TVA;
                                                              ENC=VAT Base Discount %];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100;
                                                   Editable=No }
    { 49  ;   ;Add.-Curr. Rem. Unreal. Amount;Decimal;
                                                   CaptionML=[ENU=Add.-Curr. Rem. Unreal. Amount;
                                                              ESM=Imp. no real. pdte. div.-adic.;
                                                              FRC=Taxe encaiss. rest. devise add;
                                                              ENC=Add.-Curr. Rem. Unreal. Amount];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 50  ;   ;Add.-Curr. Rem. Unreal. Base;Decimal;
                                                   CaptionML=[ENU=Add.-Curr. Rem. Unreal. Base;
                                                              ESM=Base no real. pdte. div.-adic.;
                                                              FRC=Base encais. rest. devise add.;
                                                              ENC=Add.-Curr. Rem. Unreal. Base];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 51  ;   ;VAT Difference      ;Decimal       ;CaptionML=[ENU=Tax Difference;
                                                              ESM=Diferencia  IVA;
                                                              FRC=DiffÇrence TVA;
                                                              ENC=Tax Difference];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 52  ;   ;Add.-Curr. VAT Difference;Decimal  ;AccessByPermission=TableData 4=R;
                                                   CaptionML=[ENU=Add.-Curr. Tax Difference;
                                                              ESM=Diferencia IVA divisa adic.;
                                                              FRC=DiffÇrence TVA DR;
                                                              ENC=Add.-Curr. Tax Difference];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr=GetCurrencyCode }
    { 53  ;   ;Ship-to/Order Address Code;Code10  ;TableRelation=IF (Type=CONST(Purchase)) "Order Address".Code WHERE (Vendor No.=FIELD(Bill-to/Pay-to No.))
                                                                 ELSE IF (Type=CONST(Sale)) "Ship-to Address".Code WHERE (Customer No.=FIELD(Bill-to/Pay-to No.));
                                                   CaptionML=[ENU=Ship-to/Order Address Code;
                                                              ESM=Enviar a/C¢d. dir. pedido;
                                                              FRC=Code adr. destinat./commande;
                                                              ENC=Ship-to/Order Address Code] }
    { 54  ;   ;Document Date       ;Date          ;CaptionML=[ENU=Document Date;
                                                              ESM=Fecha emisi¢n documento;
                                                              FRC=Date document;
                                                              ENC=Document Date];
                                                   Editable=No }
    { 55  ;   ;VAT Registration No.;Text20        ;OnValidate=VAR
                                                                VATRegNoFormat@1000 : Record 381;
                                                              BEGIN
                                                                VATRegNoFormat.Test("VAT Registration No.","Country/Region Code",'',0);
                                                              END;

                                                   CaptionML=[ENU=Tax Registration No.;
                                                              ESM=RFC/Curp;
                                                              FRC=N¯ identification de la TPS/TVH;
                                                              ENC=GST/HST Registration No.] }
    { 56  ;   ;Reversed            ;Boolean       ;CaptionML=[ENU=Reversed;
                                                              ESM=Revertido;
                                                              FRC=RenversÇe;
                                                              ENC=Reversed] }
    { 57  ;   ;Reversed by Entry No.;Integer      ;TableRelation="VAT Entry";
                                                   CaptionML=[ENU=Reversed by Entry No.;
                                                              ESM=Revertido por el movimiento nß;
                                                              FRC=RenversÇe par l'Çcriture n¯;
                                                              ENC=Reversed by Entry No.];
                                                   BlankZero=Yes }
    { 58  ;   ;Reversed Entry No.  ;Integer       ;TableRelation="VAT Entry";
                                                   CaptionML=[ENU=Reversed Entry No.;
                                                              ESM=Nß movimiento revertido;
                                                              FRC=êcriture renversÇe n¯;
                                                              ENC=Reversed Entry No.];
                                                   BlankZero=Yes }
    { 59  ;   ;EU Service          ;Boolean       ;CaptionML=[ENU=EU Service;
                                                              ESM=Servicio a UE;
                                                              FRC=Service UE;
                                                              ENC=EU Service];
                                                   Editable=No }
    { 10015;  ;Tax Exemption No.   ;Text30        ;CaptionML=[ENU=Tax Exemption No.;
                                                              ESM=Nß exenci¢n fisc.;
                                                              FRC=N¯ d'exonÇration fiscale;
                                                              ENC=Tax Exemption No.] }
    { 10018;  ;STE Transaction ID  ;Text20        ;CaptionML=[ENU=STE Transaction ID;
                                                              ESM=Id. transacci¢n STE;
                                                              FRC=ID de transaction STE;
                                                              ENC=STE Transaction ID];
                                                   Editable=No }
    { 10019;  ;GST/HST             ;Option        ;CaptionML=[ENU=GST/HST;
                                                              ESM=GST/HST;
                                                              FRC=TPS/TVH;
                                                              ENC=GST/HST];
                                                   OptionCaptionML=[ENU=" ,Acquisition,Self Assessment,Rebate,New Housing Rebates,Pension Rebate";
                                                                    ESM=" ,Adquisici¢n,Autoevaluaci¢n,Devoluci¢n,Devoluciones de vivienda nueva,Devoluci¢n de pensiones";
                                                                    FRC=" ,Acquisition,Auto-Çvaluation,Remise,Remises pour habitation neuve,Remise pour retraite";
                                                                    ENC=" ,Acquisition,Self Assessment,Rebate,New Housing Rebates,Pension Rebate"];
                                                   OptionString=[ ,Acquisition,Self Assessment,Rebate,New Housing Rebates,Pension Rebate] }
  }
  KEYS
  {
    {    ;Entry No.                               ;Clustered=Yes }
    {    ;Type,Closed,VAT Bus. Posting Group,VAT Prod. Posting Group,Posting Date,Tax Jurisdiction Code,Use Tax;
                                                   SumIndexFields=Base,Amount,Additional-Currency Base,Additional-Currency Amount,Remaining Unrealized Amount,Remaining Unrealized Base,Add.-Curr. Rem. Unreal. Amount,Add.-Curr. Rem. Unreal. Base;
                                                   KeyGroups=VAT }
    {    ;Type,Closed,Tax Jurisdiction Code,Use Tax,Posting Date;
                                                   SumIndexFields=Base,Amount,Unrealized Amount,Unrealized Base,Remaining Unrealized Amount }
    {    ;Type,Country/Region Code,VAT Registration No.,VAT Bus. Posting Group,VAT Prod. Posting Group,Posting Date;
                                                   SumIndexFields=Base,Additional-Currency Base }
    {    ;Document No.,Posting Date                }
    {    ;Transaction No.                          }
    {    ;Tax Jurisdiction Code,Tax Group Used,Tax Type,Use Tax,Posting Date }
    {    ;Type,Bill-to/Pay-to No.,Transaction No. ;MaintainSQLIndex=No }
  }
  FIELDGROUPS
  {
    { 1   ;DropDown            ;Entry No.,Posting Date,Document Type,Document No.,Posting Date }
  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'ENU=You cannot change the contents of this field when %1 is %2.;ESM=No se puede modificar el contenido de este campo cuando %1 tenga el valor %2.;FRC=Vous ne pouvez pas changer le contenu de ce champ lorsque %1 est %2.;ENC=You cannot change the contents of this field when %1 is %2.';
      Cust@1001 : Record 18;
      Vend@1002 : Record 23;
      GLSetup@1003 : Record 98;
      GLSetupRead@1004 : Boolean;

    LOCAL PROCEDURE GetCurrencyCode@1() : Code[10];
    BEGIN
      IF NOT GLSetupRead THEN BEGIN
        GLSetup.GET;
        GLSetupRead := TRUE;
      END;
      EXIT(GLSetup."Additional Reporting Currency");
    END;

    PROCEDURE GetUnRealizedVATPart@2(SettledAmount@1003 : Decimal;Paid@1005 : Decimal;Full@1001 : Decimal;TotalUnrealVATAmountFirst@1006 : Decimal;TotalUnrealVATAmountLast@1007 : Decimal;OriginalAmtLCY@1480000 : Decimal;OriginalCurrFactor@1020000 : Decimal) : Decimal;
    VAR
      UnrealizedVatType@1000 : ' ,Percentage,First,Last,First (Fully Paid),Last (Fully Paid),Cash Basis';
    BEGIN
      IF (Type <> 0) AND
         (Amount = 0) AND
         (Base = 0)
      THEN BEGIN
        UnrealizedVatType := GetUnrealizedVatType;
        IF (UnrealizedVatType = UnrealizedVatType::" ") OR
           (("Remaining Unrealized Amount" = 0) AND
            ("Remaining Unrealized Base" = 0))
        THEN
          EXIT(0);

        IF ABS(Paid) = ABS(Full) THEN
          EXIT(1);

        CASE UnrealizedVatType OF
          UnrealizedVatType::Percentage:
            BEGIN
              IF ABS(Full) = ABS(Paid) - ABS(SettledAmount) THEN
                EXIT(1);
              EXIT(ABS(SettledAmount) / (ABS(Full) - (ABS(Paid) - ABS(SettledAmount))));
            END;
          UnrealizedVatType::First:
            BEGIN
              IF "VAT Calculation Type" = "VAT Calculation Type"::"Reverse Charge VAT" THEN
                EXIT(1);
              IF ABS(Paid) < ABS(TotalUnrealVATAmountFirst) THEN
                EXIT(ABS(SettledAmount) / ABS(TotalUnrealVATAmountFirst));
              EXIT(1);
            END;
          UnrealizedVatType::"First (Fully Paid)":
            BEGIN
              IF "VAT Calculation Type" = "VAT Calculation Type"::"Reverse Charge VAT" THEN
                EXIT(1);
              IF ABS(Paid) < ABS(TotalUnrealVATAmountFirst) THEN
                EXIT(0);
              EXIT(1);
            END;
          UnrealizedVatType::"Last (Fully Paid)":
            EXIT(0);
          UnrealizedVatType::Last:
            BEGIN
              IF "VAT Calculation Type" = "VAT Calculation Type"::"Reverse Charge VAT" THEN
                EXIT(0);
              IF ABS(Paid) > ABS(Full) - ABS(TotalUnrealVATAmountLast) THEN
                EXIT((ABS(Paid) - (ABS(Full) - ABS(TotalUnrealVATAmountLast))) / ABS(TotalUnrealVATAmountLast));
              EXIT(0);
            END;
          UnrealizedVatType::"Cash Basis":
            BEGIN
              IF OriginalAmtLCY = 0 THEN
                EXIT(1);

              EXIT(-SettledAmount / OriginalAmtLCY);
            END;
        END;
      END ELSE
        EXIT(0);
    END;

    LOCAL PROCEDURE GetUnrealizedVatType@3() UnrealizedVatType : Integer;
    VAR
      VatPostingSetup@1001 : Record 325;
      TaxJurisdiction@1000 : Record 320;
    BEGIN
      IF "VAT Calculation Type" = "VAT Calculation Type"::"Sales Tax" THEN BEGIN
        TaxJurisdiction.GET("Tax Jurisdiction Code");
        UnrealizedVatType := TaxJurisdiction."Unrealized VAT Type";
      END ELSE BEGIN
        VatPostingSetup.GET("VAT Bus. Posting Group","VAT Prod. Posting Group");
        UnrealizedVatType := VatPostingSetup."Unrealized VAT Type";
      END;
    END;

    PROCEDURE CopyFromGenJnlLine@5(GenJnlLine@1000 : Record 81);
    BEGIN
      CopyPostingGroupsFromGenJnlLine(GenJnlLine);
      "Posting Date" := GenJnlLine."Posting Date";
      "Document Date" := GenJnlLine."Document Date";
      "Document No." := GenJnlLine."Document No.";
      "External Document No." := GenJnlLine."External Document No.";
      "Document Type" := GenJnlLine."Document Type";
      Type := GenJnlLine."Gen. Posting Type";
      "VAT Calculation Type" := GenJnlLine."VAT Calculation Type";
      "Source Code" := GenJnlLine."Source Code";
      "Reason Code" := GenJnlLine."Reason Code";
      "Ship-to/Order Address Code" := GenJnlLine."Ship-to/Order Address Code";
      "EU 3-Party Trade" := GenJnlLine."EU 3-Party Trade";
      "User ID" := USERID;
      "No. Series" := GenJnlLine."Posting No. Series";
      "VAT Base Discount %" := GenJnlLine."VAT Base Discount %";
      "Bill-to/Pay-to No." := GenJnlLine."Bill-to/Pay-to No.";
      "Country/Region Code" := GenJnlLine."Country/Region Code";
      "VAT Registration No." := GenJnlLine."VAT Registration No.";
    END;

    LOCAL PROCEDURE CopyPostingGroupsFromGenJnlLine@4(GenJnlLine@1000 : Record 81);
    BEGIN
      "Gen. Bus. Posting Group" := GenJnlLine."Gen. Bus. Posting Group";
      "Gen. Prod. Posting Group" := GenJnlLine."Gen. Prod. Posting Group";
      "VAT Bus. Posting Group" := GenJnlLine."VAT Bus. Posting Group";
      "VAT Prod. Posting Group" := GenJnlLine."VAT Prod. Posting Group";
      "Tax Area Code" := GenJnlLine."Tax Area Code";
      "Tax Liable" := GenJnlLine."Tax Liable";
      "Tax Group Code" := GenJnlLine."Tax Group Code";
      "Use Tax" := GenJnlLine."Use Tax";
    END;

    BEGIN
    END.
  }
}

