OBJECT Table 870 Social Listening Setup
{
  OBJECT-PROPERTIES
  {
    Date=09/15/15;
    Time=12:00:00 PM;
    Version List=NAVW19.00;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               IF "Signup URL" = '' THEN
                 "Signup URL" := SocialListeningMgt.GetSignupURL;
               IF "Terms of Use URL" = '' THEN
                 "Terms of Use URL" := SocialListeningMgt.GetTermsOfUseURL;
             END;

    CaptionML=[ENU=Social Engagement Setup;
               ESM=Configuraci¢n de Social Engagement;
               FRC=Configuration de Social Engagement;
               ENC=Social Engagement Setup];
  }
  FIELDS
  {
    { 1   ;   ;Primary Key         ;Code10        ;CaptionML=[ENU=Primary Key;
                                                              ESM=Clave primaria;
                                                              FRC=Cl‚ primaire;
                                                              ENC=Primary Key] }
    { 2   ;   ;Solution ID         ;Text250       ;OnValidate=BEGIN
                                                                IF "Solution ID" = '' THEN BEGIN
                                                                  VALIDATE("Show on Items",FALSE);
                                                                  VALIDATE("Show on Customers",FALSE);
                                                                  VALIDATE("Show on Vendors",FALSE);
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Solution ID;
                                                              ESM=Id. de soluci¢n;
                                                              FRC=Code de la solution;
                                                              ENC=Solution ID];
                                                   Editable=No }
    { 3   ;   ;Show on Items       ;Boolean       ;OnValidate=BEGIN
                                                                IF "Show on Items" THEN BEGIN
                                                                  TESTFIELD("Social Listening URL");
                                                                  TESTFIELD("Accept License Agreement");
                                                                  TESTFIELD("Solution ID");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Show on Items;
                                                              ESM=Mostrar en Art¡culos;
                                                              FRC=Afficher dans Articles;
                                                              ENC=Show on Items] }
    { 4   ;   ;Show on Customers   ;Boolean       ;OnValidate=BEGIN
                                                                IF "Show on Customers" THEN BEGIN
                                                                  TESTFIELD("Social Listening URL");
                                                                  TESTFIELD("Accept License Agreement");
                                                                  TESTFIELD("Solution ID");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Show on Customers;
                                                              ESM=Mostrar en Clientes;
                                                              FRC=Afficher dans Clients;
                                                              ENC=Show on Customers] }
    { 5   ;   ;Show on Vendors     ;Boolean       ;OnValidate=BEGIN
                                                                IF "Show on Vendors" THEN BEGIN
                                                                  TESTFIELD("Social Listening URL");
                                                                  TESTFIELD("Accept License Agreement");
                                                                  TESTFIELD("Solution ID");
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Show on Vendors;
                                                              ESM=Mostrar en Proveedores;
                                                              FRC=Afficher dans Fournisseurs;
                                                              ENC=Show on Vendors] }
    { 6   ;   ;Accept License Agreement;Boolean   ;OnValidate=BEGIN
                                                                IF NOT "Accept License Agreement" THEN BEGIN
                                                                  VALIDATE("Show on Items",FALSE);
                                                                  VALIDATE("Show on Customers",FALSE);
                                                                  VALIDATE("Show on Vendors",FALSE);
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Accept License Agreement;
                                                              ESM=Aceptar contrato licencia;
                                                              FRC=Accepter le contrat de licence;
                                                              ENC=Accept License Agreement] }
    { 7   ;   ;Terms of Use URL    ;Text250       ;ExtendedDatatype=URL;
                                                   CaptionML=[ENU=Terms of Use URL;
                                                              ESM=URL de Condiciones de uso;
                                                              FRC=URL conditions d'utilisation;
                                                              ENC=Terms of Use URL];
                                                   NotBlank=Yes }
    { 8   ;   ;Signup URL          ;Text250       ;ExtendedDatatype=URL;
                                                   CaptionML=[ENU=Signup URL;
                                                              ESM=URL de registro;
                                                              FRC=URL inscription;
                                                              ENC=Signup URL];
                                                   NotBlank=Yes }
    { 9   ;   ;Social Listening URL;Text250       ;OnValidate=BEGIN
                                                                IF "Social Listening URL" = '' THEN BEGIN
                                                                  VALIDATE("Solution ID",'');
                                                                  EXIT;
                                                                END;

                                                                IF STRPOS("Social Listening URL",'https://') <> 1 THEN
                                                                  ERROR(MustStartWithErr,FIELDCAPTION("Social Listening URL"));
                                                                IF STRPOS("Social Listening URL",'/app/') = 0 THEN
                                                                  ERROR(MustContainSolutionIDErr,FIELDCAPTION("Social Listening URL"));

                                                                VALIDATE("Solution ID",SocialListeningMgt.ConvertURLToID("Social Listening URL",'/app/'));
                                                              END;

                                                   ExtendedDatatype=URL;
                                                   CaptionML=[ENU=Social Engagement URL;
                                                              ESM=URL de Social Engagement;
                                                              FRC=URL Social Engagement;
                                                              ENC=Social Engagement URL] }
  }
  KEYS
  {
    {    ;Primary Key                             ;Clustered=Yes }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      SocialListeningMgt@1000 : Codeunit 871;
      MustStartWithErr@1001 : TextConst 'ENU=The %1 must start with ''https://''.;ESM=%1 debe empezar por ''https://''.;FRC=%1 doit d‚buter par ®ÿhttps://ÿ¯.;ENC=The %1 must start with ''https://''.';
      MustContainSolutionIDErr@1002 : TextConst 'ENU=The %1 must contain the Solution ID.;ESM=%1 debe contener el Id. de soluci¢n.;FRC=%1 doit contenir le code de la solution.;ENC=The %1 must contain the Solution ID.';

    BEGIN
    END.
  }
}

